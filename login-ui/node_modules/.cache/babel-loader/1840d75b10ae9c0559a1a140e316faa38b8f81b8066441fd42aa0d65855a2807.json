{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bonow\\\\Desktop\\\\Teste-Login\\\\login-ui\\\\src\\\\components\\\\admin\\\\AdminPage.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { Container } from 'semantic-ui-react';\nimport { useAuth } from '../context/AuthContext';\nimport { bookApi } from '../misc/BookApi';\nimport AdminTab from './AdminTab';\nimport { handleLogError } from '../misc/Helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminPage() {\n  _s();\n  const Auth = useAuth();\n  const user = Auth.getUser();\n  const isAdmin = user.role === 'ADMIN';\n  const [users, setUsers] = useState([]);\n  const [userUsernameSearch, setUserUsernameSearch] = useState('');\n  const [isUsersLoading, setIsUsersLoading] = useState(false);\n  const [books, setBooks] = useState([]);\n  const [bookIsbn, setBookIsbn] = useState('');\n  const [bookTitle, setBookTitle] = useState('');\n  const [bookTextSearch, setBookTextSearch] = useState('');\n  const [isBooksLoading, setIsBooksLoading] = useState(false);\n  useEffect(() => {\n    handleGetUsers();\n    handleGetBooks();\n  }, []);\n  const handleInputChange = (e, {\n    name,\n    value\n  }) => {\n    if (name === 'userUsernameSearch') {\n      setUserUsernameSearch(value);\n    } else if (name === 'bookIsbn') {\n      setBookIsbn(value);\n    } else if (name === 'bookTitle') {\n      setBookTitle(value);\n    } else if (name === 'bookTextSearch') {\n      setBookTextSearch(value);\n    }\n  };\n  const handleGetUsers = async () => {\n    try {\n      setIsUsersLoading(true);\n      const response = await bookApi.getUsers(user);\n      const users = response.data;\n      setUsers(users);\n    } catch (error) {\n      handleLogError(error);\n    } finally {\n      setIsUsersLoading(false);\n    }\n  };\n  const handleDeleteUser = async username => {\n    try {\n      await bookApi.deleteUser(user, username);\n      await handleGetUsers();\n    } catch (error) {\n      handleLogError(error);\n    }\n  };\n  const handleSearchUser = async () => {\n    try {\n      const response = await bookApi.getUsers(user, userUsernameSearch);\n      const data = response.data;\n      const users = data instanceof Array ? data : [data];\n      setUsers(users);\n    } catch (error) {\n      handleLogError(error);\n      setUsers([]);\n    }\n  };\n  const handleGetBooks = async () => {\n    try {\n      setIsBooksLoading(true);\n      const response = await bookApi.getBooks(user);\n      setBooks(response.data);\n    } catch (error) {\n      handleLogError(error);\n    } finally {\n      setIsBooksLoading(false);\n    }\n  };\n  const handleDeleteBook = async isbn => {\n    try {\n      await bookApi.deleteBook(user, isbn);\n      await handleGetBooks();\n    } catch (error) {\n      handleLogError(error);\n    }\n  };\n  const handleAddBook = async () => {\n    try {\n      const book = {\n        isbn: bookIsbn.trim(),\n        title: bookTitle.trim()\n      };\n      if (!(book.isbn && book.title)) {\n        return;\n      }\n      await bookApi.addBook(user, book);\n      clearBookForm();\n      await handleGetBooks();\n    } catch (error) {\n      handleLogError(error);\n    }\n  };\n  const handleSearchBook = async () => {\n    try {\n      const response = await bookApi.getBooks(user, bookTextSearch);\n      const books = response.data;\n      setBooks(books);\n    } catch (error) {\n      handleLogError(error);\n      setBooks([]);\n    }\n  };\n  const clearBookForm = () => {\n    setBookIsbn('');\n    setBookTitle('');\n  };\n  if (!isAdmin) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(AdminTab, {\n      isUsersLoading: isUsersLoading,\n      users: users,\n      userUsernameSearch: userUsernameSearch,\n      handleDeleteUser: handleDeleteUser,\n      handleSearchUser: handleSearchUser,\n      isBooksLoading: isBooksLoading,\n      books: books,\n      bookIsbn: bookIsbn,\n      bookTitle: bookTitle,\n      bookTextSearch: bookTextSearch,\n      handleAddBook: handleAddBook,\n      handleDeleteBook: handleDeleteBook,\n      handleSearchBook: handleSearchBook,\n      handleInputChange: handleInputChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminPage, \"e8TIERsj1DXGMWHeAml9TY6A0sg=\", false, function () {\n  return [useAuth];\n});\n_c = AdminPage;\nexport default AdminPage;\nvar _c;\n$RefreshReg$(_c, \"AdminPage\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","Container","useAuth","bookApi","AdminTab","handleLogError","jsxDEV","_jsxDEV","AdminPage","_s","Auth","user","getUser","isAdmin","role","users","setUsers","userUsernameSearch","setUserUsernameSearch","isUsersLoading","setIsUsersLoading","books","setBooks","bookIsbn","setBookIsbn","bookTitle","setBookTitle","bookTextSearch","setBookTextSearch","isBooksLoading","setIsBooksLoading","handleGetUsers","handleGetBooks","handleInputChange","e","name","value","response","getUsers","data","error","handleDeleteUser","username","deleteUser","handleSearchUser","Array","getBooks","handleDeleteBook","isbn","deleteBook","handleAddBook","book","trim","title","addBook","clearBookForm","handleSearchBook","to","fileName","_jsxFileName","lineNumber","columnNumber","children","_c","$RefreshReg$"],"sources":["C:/Users/bonow/Desktop/Teste-Login/login-ui/src/components/admin/AdminPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Navigate } from 'react-router-dom'\nimport { Container } from 'semantic-ui-react'\nimport { useAuth } from '../context/AuthContext'\nimport { bookApi } from '../misc/BookApi'\nimport AdminTab from './AdminTab'\nimport { handleLogError } from '../misc/Helpers'\n\nfunction AdminPage() {\n  const Auth = useAuth()\n  const user = Auth.getUser()\n  const isAdmin = user.role === 'ADMIN'\n\n  const [users, setUsers] = useState([])\n  const [userUsernameSearch, setUserUsernameSearch] = useState('')\n  const [isUsersLoading, setIsUsersLoading] = useState(false)\n\n  const [books, setBooks] = useState([])\n  const [bookIsbn, setBookIsbn] = useState('')\n  const [bookTitle, setBookTitle] = useState('')\n  const [bookTextSearch, setBookTextSearch] = useState('')\n  const [isBooksLoading, setIsBooksLoading] = useState(false)\n\n  useEffect(() => {\n    handleGetUsers()\n    handleGetBooks()\n  }, [])\n\n  const handleInputChange = (e, { name, value }) => {\n    if (name === 'userUsernameSearch') {\n      setUserUsernameSearch(value)\n    } else if (name === 'bookIsbn') {\n      setBookIsbn(value)\n    } else if (name === 'bookTitle') {\n      setBookTitle(value)\n    } else if (name === 'bookTextSearch') {\n      setBookTextSearch(value)\n    }\n  }\n\n  const handleGetUsers = async () => {\n    try {\n      setIsUsersLoading(true)\n      const response = await bookApi.getUsers(user)\n      const users = response.data\n      setUsers(users)\n    } catch (error) {\n      handleLogError(error)\n    } finally {\n      setIsUsersLoading(false)\n    }\n  }\n\n  const handleDeleteUser = async (username) => {\n    try {\n      await bookApi.deleteUser(user, username)\n      await handleGetUsers()\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  const handleSearchUser = async () => {\n    try {\n      const response = await bookApi.getUsers(user, userUsernameSearch)\n      const data = response.data\n      const users = data instanceof Array ? data : [data]\n      setUsers(users)\n    } catch (error) {\n      handleLogError(error)\n      setUsers([])\n    }\n  }\n\n  const handleGetBooks = async () => {\n    try {\n      setIsBooksLoading(true)\n      const response = await bookApi.getBooks(user)\n      setBooks(response.data)\n    } catch (error) {\n      handleLogError(error)\n    } finally {\n      setIsBooksLoading(false)\n    }\n  }\n\n  const handleDeleteBook = async (isbn) => {\n    try {\n      await bookApi.deleteBook(user, isbn)\n      await handleGetBooks()\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  const handleAddBook = async () => {\n    try {\n      const book = { isbn: bookIsbn.trim(), title: bookTitle.trim() }\n      if (!(book.isbn && book.title)) {\n        return\n      }\n      await bookApi.addBook(user, book)\n      clearBookForm()\n      await handleGetBooks()\n    } catch (error) {\n      handleLogError(error)\n    }\n  }\n\n  const handleSearchBook = async () => {\n    try {\n      const response = await bookApi.getBooks(user, bookTextSearch)\n      const books = response.data\n      setBooks(books)\n    } catch (error) {\n      handleLogError(error)\n      setBooks([])\n    }\n  }\n\n  const clearBookForm = () => {\n    setBookIsbn('')\n    setBookTitle('')\n  }\n\n  if (!isAdmin) {\n    return <Navigate to='/' />\n  }\n\n  return (\n    <Container>\n      <AdminTab\n        isUsersLoading={isUsersLoading}\n        users={users}\n        userUsernameSearch={userUsernameSearch}\n        handleDeleteUser={handleDeleteUser}\n        handleSearchUser={handleSearchUser}\n        isBooksLoading={isBooksLoading}\n        books={books}\n        bookIsbn={bookIsbn}\n        bookTitle={bookTitle}\n        bookTextSearch={bookTextSearch}\n        handleAddBook={handleAddBook}\n        handleDeleteBook={handleDeleteBook}\n        handleSearchBook={handleSearchBook}\n        handleInputChange={handleInputChange}\n      />\n    </Container>\n  )\n}\n\nexport default AdminPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}